<div class="timer-widget" *ngIf="mainTimer() || mainStopwatch()">
  <div class="timer-label">
    {{ mainTimer()?.label || mainStopwatch()?.label }}
  </div>
  <div class="timer-time">
    <ng-container *ngIf="mainTimer(); else stopwatchBlock">
      {{ getTimeLeft(mainTimer()?.remainingMs ?? 0) }}
    </ng-container>
    <ng-template #stopwatchBlock>
      {{ getTimeLeft(mainStopwatch()?.elapsedMs ?? 0) }}
    </ng-template>
  </div>
  <div class="timer-controls">
    <button
      *ngIf="(mainTimer() && mainTimer()?.state === 'running') || (mainStopwatch() && mainStopwatch()?.running)"
      (click)="pause()"
    >Pause</button>
    <button
      *ngIf="(mainTimer() && mainTimer()?.state === 'paused') || (mainStopwatch() && !mainStopwatch()?.running)"
      (click)="resume()"
    >Resume</button>
    <button *ngIf="mainTimer()" (click)="addMinute()">+1 min</button>
    <button *ngIf="mainTimer()" (click)="subtractMinute()">-1 min</button>
    <button (click)="close()">‚ùå</button>
  </div>
  <div class="timer-switch">
    <span
      *ngFor="let t of timers()"
      [class.active]="t.id === mainTimerId()"
      (click)="selectTimer(t.id)"
    >
      {{ t.label }}
    </span>
    <span
      *ngFor="let sw of stopwatches()"
      [class.active]="sw.id === mainStopwatchId()"
      (click)="selectStopwatch(sw.id)"
    >
      {{ sw.label }}
    </span>
  </div>
  <div *ngIf="mainTimer()?.state === 'finished'" class="timer-finished">
    Timer finished!
  </div>
</div>
